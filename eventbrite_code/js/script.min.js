!function(){function a(){"use strict";null!==k&&k.apply(this,arguments)}function b(a){"use strict";n.call(this,a),this.state={events:a.locationData,location:a.locationName,radius:a.locationRadius,popularEvents:a.popularEvents,nextWeekendEvents:a.nextWeekendEvents}}var c,d={TOKEN:"DB76SJDUSQFFHVNSQC6Y",API_ENDPOINT:"https://www.eventbriteapi.com/v3/events/search/",POSTDATA_DATE_FORMAT:"YYYY-MM-DDTHH:mm:ss[Z]",EVENT_DISPLAY_DATE_FORMAT:"ddd, MMM D h:mm A"},e=chrome.storage.local,f=document.getElementById("app"),g="",h=[],i="",j="",k=React.Component;for(var l in k)k.hasOwnProperty(l)&&(a[l]=k[l]);var m=null===k?null:k.prototype;a.prototype=Object.create(m),a.prototype.constructor=a,a.__superConstructor__=k,Object.defineProperty(a.prototype,"handleClick",{writable:!0,configurable:!0,value:function(a){"use strict";a.preventDefault(),chrome.tabs.create({url:$(a.currentTarget).attr("href")})}}),Object.defineProperty(a.prototype,"render",{writable:!0,configurable:!0,value:function(){"use strict";if(0==this.props.events.length&&""!=$.trim(this.props.locationName))return React.createElement("div",{className:"no-events-found"},React.createElement("span",null,"Whoops! No events found."));var a=this.props.events.map(function(a){var b=moment(a.start.local).format(d.EVENT_DISPLAY_DATE_FORMAT),c=(moment(a.end.local).format(d.EVENT_DISPLAY_DATE_FORMAT),null!=a.venue.address.city?a.venue.address.city+","+a.venue.address.region:null),e={backgroundImage:"url("+a.logo_url+")"};return React.createElement("li",{key:a.id,className:"event-container"},React.createElement("a",{href:a.url,onClick:this.handleClick},React.createElement("div",{className:"event"},React.createElement("div",{className:"image",style:e,"data-adaptive-background":"1","data-ab-css-background":"1"}),React.createElement("div",{className:"body"},React.createElement("span",{className:"title"},a.name.text),React.createElement("span",{className:"organizer"},a.organizer.name),React.createElement("span",{className:"date"},b),null!=c?React.createElement("span",{className:"address"},c):""))))},this);return React.createElement("div",null,React.createElement("ul",{className:"events-list"},a))}});var n=React.Component;for(var o in n)n.hasOwnProperty(o)&&(b[o]=n[o]);var p=null===n?null:n.prototype;b.prototype=Object.create(p),b.prototype.constructor=b,b.__superConstructor__=n,Object.defineProperty(b.prototype,"getData",{writable:!0,configurable:!0,value:function(a,b,c,f){"use strict";var g=this,h={"location.address":a,"location.within":b+"mi",token:d.TOKEN};if(c&&(h.popular="on"),f){var i=moment().add(1,"weeks").endOf("isoWeek").subtract(2,"day").add(1,"second"),j=moment().add(1,"weeks").endOf("isoWeek");h["start_date.range_start"]=i.format(d.POSTDATA_DATE_FORMAT),h["start_date.range_end"]=j.format(d.POSTDATA_DATE_FORMAT)}$.ajax({url:d.API_ENDPOINT,type:"GET",dataType:"JSON",data:h,success:function(d){var h={locationName:a,locationRadius:b,popularEvents:c,nextWeekendEvents:f,locationData:d.events.map(function(a){return{id:a.id,start:a.start,end:a.end,url:a.url,venue:a.venue,logo_url:a.logo_url,name:a.name,organizer:a.organizer}})};e.set({"eventbrite-aroundme":JSON.stringify(h)}),g.setState({events:d.events,location:a,radius:b,popularEvents:c,nextWeekendEvents:f}),g.hideLoading()}})}}),Object.defineProperty(b.prototype,"componentDidMount",{writable:!0,configurable:!0,value:function(){"use strict";var a=this;this.searchInput=this.refs.searchInput.getDOMNode(),this.searchRadiusInput=this.refs.searchRadiusInput.getDOMNode(),this.popularEvents=this.refs.popularEvents.getDOMNode(),this.nextWeekendEvents=this.refs.nextWeekendEvents.getDOMNode(),this.service=new google.maps.places.AutocompleteService,$(this.searchInput).typeahead({highlight:!0},{displayKey:"prediction",source:function(b,c){a.service.getPlacePredictions({input:b},function(a,b){b==google.maps.places.PlacesServiceStatus.OK&&c($.map(a,function(a){return{prediction:a.description}}))})}}).on("typeahead:selected",function(b,c){a.showLoading(),a.getData(c.prediction,a.searchRadiusInput.value,a.popularEvents.checked,a.nextWeekendEvents.checked)}).on("focus",function(){$(".location-marker").css("opacity",1)}).on("focusout",function(){$(".location-marker").css("opacity",0)}),this.hideLoading()}}),Object.defineProperty(b.prototype,"hideLoading",{writable:!0,configurable:!0,value:function(){"use strict";$(this.refs.eventsListContainer.getDOMNode()).removeClass("loading"),$(this.refs.loader.getDOMNode()).hide()}}),Object.defineProperty(b.prototype,"showLoading",{writable:!0,configurable:!0,value:function(){"use strict";$(this.refs.eventsListContainer.getDOMNode()).addClass("loading"),$(this.refs.loader.getDOMNode()).show()}}),Object.defineProperty(b.prototype,"searchRadiusChangeHandler",{writable:!0,configurable:!0,value:function(a){"use strict";var b=this.searchInput.value;""!=$.trim(b)&&(this.showLoading(),this.getData(b,a.target.value,this.popularEvents.checked,this.nextWeekendEvents.checked))}}),Object.defineProperty(b.prototype,"optionsHandler",{writable:!0,configurable:!0,value:function(a){"use strict";this.setState({popularEvents:this.popularEvents.checked,nextWeekendEvents:this.nextWeekendEvents.checked});var b=this.searchInput.value;""!=$.trim(b)&&(this.showLoading(),"popular-events"==$(a.target).attr("name")?this.getData(this.searchInput.value,this.searchRadiusInput.value,this.popularEvents.checked,this.nextWeekendEvents.checked):this.getData(this.searchInput.value,this.searchRadiusInput.value,this.popularEvents.checked,this.nextWeekendEvents.checked))}}),Object.defineProperty(b.prototype,"render",{writable:!0,configurable:!0,value:function(){"use strict";var b=this.state.location,c=this.state.radius,d=this.state.popularEvents,e=this.state.nextWeekendEvents;return React.createElement("div",null,React.createElement("div",{id:"logo-container"},React.createElement("div",{id:"logo"})),React.createElement("div",{className:"loader",ref:"loader"},React.createElement("img",{src:"../img/icons/48x48.png"})),React.createElement("div",{className:"search-box"},React.createElement("div",{className:"block-header"},React.createElement("span",{className:"title"},"Popular events within",React.createElement("select",{className:"search-radius-input",ref:"searchRadiusInput",onChange:this.searchRadiusChangeHandler.bind(this),defaultValue:c},React.createElement("option",{value:"10"},"10"),React.createElement("option",{value:"25"},"25"),React.createElement("option",{value:"50"},"50")),"miles around ")),React.createElement("div",{className:"location-input"},React.createElement("span",{className:"location-marker"}),React.createElement("input",{autoFocus:!0,type:"text",ref:"searchInput",className:"search-input",placeholder:"Enter your location here",defaultValue:b}))),React.createElement("div",{className:"event-options"},React.createElement("label",null,React.createElement("input",{type:"checkbox",value:"true",ref:"popularEvents",name:"popular-events",checked:""==d?!1:!0,onChange:this.optionsHandler.bind(this)}," Popular ")),React.createElement("label",null,React.createElement("input",{type:"checkbox",value:"true",ref:"nextWeekendEvents",name:"next-weekend-events",checked:""==e?!1:!0,onChange:this.optionsHandler.bind(this)}," Next Weekend "))),React.createElement("div",{className:"events-list-container",ref:"eventsListContainer"},React.createElement(a,{events:this.state.events,locationName:this.state.location})))}}),e.get("eventbrite-aroundme",function(a){if(void 0!==a["eventbrite-aroundme"]){var d=JSON.parse(a["eventbrite-aroundme"]);g=d.locationName,h=d.locationData,c=d.locationRadius,i=d.popularEvents,j=d.nextWeekendEvents}React.render(React.createElement(b,{locationName:g,locationData:h,locationRadius:c,popularEvents:i,nextWeekendEvents:j}),f)})}();